<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Rackspace Developer Center</title>
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800" rel="stylesheet" type='text/css'>

  <!-- drc styles: -->
  <link rel="stylesheet" href="https://c2a32ff18d23c8f567f0-e44b0df73868b5d567b1e58e01681d15.ssl.cf5.rackcdn.com/main-ebdad849435665c9fe9a22d338a57bf6.css">

  <!-- local styles: -->
  <link rel="stylesheet" href="_static/localsphinx.css">

  <link href="/atom.xml" rel="alternate" title="Rackspace Developer Portal" type="application/atom+xml">
 <!-- Start Visual Website Optimizer Asynchronous Code -->
<script type='text/javascript'>
var _vwo_code=(function(){
var account_id=45237,
settings_tolerance=2000,
library_tolerance=2500,
use_existing_jquery=false,
// DO NOT EDIT BELOW THIS LINE
f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
</script>
<!-- End Visual Website Optimizer Asynchronous Code -->
</head>
<div id="header" class="navbar navbar-fixed-top navbar-inverse navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-btn">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand new-landing-sprite rs-developer-logo" href="/"></a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-collapse-btn">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/sdks/">SDKs</a></li>
                <li><a href="/databases/">Databases</a></li>
                <li><a href="/docs/">API Docs</a></li>
                <li><a href="/blog/">Blog</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="https://community.rackspace.com/developers/default">Developer Forum</a></li>
                        <li><a href="/community/">Outreach &amp; Events</a></li>
                        <li><a href="https://github.com/rackerlabs/developer.rackspace.com">This site on github</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Help <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <!--<li><a href="#">Developer-to-Developer Support</a></li>-->
                        <li><a href="http://www.rackspace.com/knowledge_center/">Knowledge Center</a></li>
                        <li><a href="http://status.rackspace.com">System Health Status</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Login <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="https://my.rackspace.com/portal/auth/login">MyRackspace Portal</a></li>
                        <li><a href="https://mycloud.rackspace.com">Cloud Control Panel</a></li>
                        <li><a href="https://manage.rackspacecloud.com/pages/Login.jsp">Cloud Sites Control Panel</a>
                        </li>
                        <li><a href="https://apps.rackspace.com">Rackspace Webmail Login</a></li>
                        <li><a href="https://cp.rackspace.com">Email Admin Login</a></li>
                    </ul>
                </li>
                <li>
                    <a href="/signup" class="btn btn-default" id="btn-get-started">Sign up for $50/month credit</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="title-header">
  <div class="inner">
    <span class="headline">Rackspace Developer Center</span>
  </div>
</div>
<div class="container body-container">
  <div class="row">
    <div class="col-md-9 col-md-push-3 docs-content bodycontent">
      <div class="document">
  <div class="documentwrapper">
      <div class="body" role="main">

  <div class="section" id="object-versioning">
<h1>Object versioning<a class="headerlink" href="#object-versioning" title="Permalink to this headline">Â¶</a></h1>
<p>Object versioning enables you to store multiple versions of your content
so that you can recover from unintended overwrites and deletions. It
provides an easy way to implement version control that can be used on
any type of content.</p>
<p>We strongly recommends that you put non-current objects in a separate
container from the current versions of objects. After you enable object
versioning, new data written to an object causes the last-current
version to be written to the separate container. Each of the non-current
versions has a timestamp appended to it, so you know when it was
originally created.</p>
<p>To enable object versioning, you perform the following steps:</p>
<ol class="arabic simple">
<li>Create a container where your non-current versions will be written.</li>
<li>On the container that holds the current versions of your objects, set
the X-Versions-Location metadata header to point to the new
non-current version container that you created.</li>
</ol>
<p>After you complete these steps, versioning is enabled on each object in
your current-version container. Changes to the objects automatically
create non-current versions in the separate container.</p>
<p>Nothing is written to the non-current version container when you
initially use a <strong>PUT</strong> operation to add an object into the
current-version container. You create non-current versions only when you
edit existing objects with a <strong>PUT</strong> request. These non-current versions
are labeled according to the following schema:</p>
<p><code class="docutils literal"><span class="pre">{length}{objectName}/{time</span> <span class="pre">stamp}</span></code></p>
<p>Where <code class="docutils literal"><span class="pre">{length}</span></code> is the 3-character zero-padded hexadecimal character
length of the <code class="docutils literal"><span class="pre">{objectName}</span></code>, and <code class="docutils literal"><span class="pre">{timestamp}</span></code> indicates when the
object was originally created as a current version.</p>
<p>Any return status in the 2nn range, such as 202 (Accepted), denotes
success. Status codes in the 4nn or 5nn range denote failure. If you
receive an error, you should retry your request. Note, however, that if
you specify a container that does not exist as your non-current version
container, a status of 412 (Precondition Failed) is returned when you
edit the versioned object. If you receive this error, verify that the
container exists.</p>
<p>When object versioning is enabled, requests on objects behave as
follows:</p>
<ul class="simple">
<li>A <strong>GET</strong> request to a versioned object returns the current version
of the object, with no request redirects or metadata lookups
required.</li>
<li>A <strong>POST</strong> request to a versioned object updates only the current
version of the object&#8217;s metadata. It does not create a new version of
the object. New versions are created when the content of the object
changes.</li>
<li>A <strong>DELETE</strong> request to a versioned object removes the current
version of the object and replaces it with the most recent
non-current version, moving it from the non-current container to the
current container. This most recent non-current version carries with
it any metadata last set on it. If you want to completely remove an
object and you have five total versions of it, you must perform five
<strong>DELETE</strong> operations on it.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A large-object manifest file cannot be versioned, but it can point to
versioned segments.</p>
</div>
<p>To turn off object versioning on your current version container, remove
its <code class="docutils literal"><span class="pre">X-Versions-Location</span></code> metadata by sending a key value that is an
empty string.</p>
<p><strong>Example: Object versioning with cURL</strong></p>
<ol class="arabic">
<li><p class="first">Create a version-storing container named <code class="docutils literal"><span class="pre">versions</span></code>.</p>
<div class="code highlight-python"><div class="highlight"><pre>curl -i -XPUT -H &quot;X-Auth-Token: yourAuthToken&quot; http://yourStorageUrl/versions
</pre></div>
</div>
</li>
<li><p class="first">Create a container named <code class="docutils literal"><span class="pre">current</span></code> with a <code class="docutils literal"><span class="pre">X-Versions-Location</span></code>
header that references <code class="docutils literal"><span class="pre">versions</span></code>.</p>
<div class="code highlight-python"><div class="highlight"><pre>curl -i -XPUT -H &quot;X-Auth-Token: yourAuthToken&quot; \
-H &quot;X-Versions-Location: versions&quot; http://yourStorageUrl/current
</pre></div>
</div>
</li>
<li><p class="first">Create an object (the first version).</p>
<div class="code highlight-python"><div class="highlight"><pre>curl -i -XPUT --data-binary 1 -H &quot;X-Auth-Token: yourAuthToken&quot; \
    http://yourStorageUrl/current/myobject
</pre></div>
</div>
</li>
<li><p class="first">Create a new version of that object.</p>
<div class="code highlight-python"><div class="highlight"><pre>curl -i -XPUT --data-binary 2 -H &quot;X-Auth-Token: yourAuthToken&quot; \
    http://yourStorageUrl}/current/myobject
</pre></div>
</div>
</li>
<li><p class="first">See a list of the older versions of the object. (The example includes
the hexadecimal number for the length of the file name.)</p>
<div class="code highlight-python"><div class="highlight"><pre>curl -i -H &quot;X-Auth-Token: yourAuthToken&quot; \
    http://yourStorageUrl/versions?prefix=008myobject/
</pre></div>
</div>
</li>
<li><p class="first">Delete the current version of the object and see that the older
version is no longer in the <code class="docutils literal"><span class="pre">versions</span></code> container.</p>
<div class="code highlight-python"><div class="highlight"><pre>curl -i -XDELETE -H &quot;X-Auth-Token: yourAuthToken&quot; \
    http://yourStorageUrl&gt;/current/myobject
curl -i -H &quot;X-Auth-Token: yourAuthToken &quot; \
    http://yourStorageUrl/versions?prefix=008myobject/
</pre></div>
</div>
</li>
</ol>
</div>


</div>

  <div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>


      </div>
<div class="clearer"></div>
</div>
    </div>
    <div class="col-md-3 col-md-pull-9 sidebar">
<ul>
  <li><a href="/" class="back">&laquo; Developer Home</a></li>
</ul>
<ul>
  
<a href="expiring-objects.html"><<</a>

|

<a href="account-to-account-copy.html">>></a>

  <li><span class="sidebarheader">Contents</span></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="pricing-and-service-level.html">Pricing and service level</a></li>
<li class="toctree-l1"><a class="reference internal" href="additional-resources.html">Additional resources</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions.html">Permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="operations.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="cdn-enabled-containers.html">CDN-enabled containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="language-specific-apis.html">Language-specific APIs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="general-api-information.html">General API information</a></li>
<li class="toctree-l1"><a class="reference internal" href="role-based-access-control.html">Role Based Access Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="service-access-endpoints.html">Service access endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud-files-service-contract-version.html">Cloud Files service contract version</a></li>
<li class="toctree-l1"><a class="reference internal" href="absolute-limits.html">Absolute limits</a></li>
<li class="toctree-l1"><a class="reference internal" href="request-and-response-types.html">Request and response types</a></li>
<li class="toctree-l1"><a class="reference internal" href="response-codes.html">Response codes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pseudo-hierarchical-folders-and-directories.html">Pseudo-hierarchical folders and directories</a></li>
<li class="toctree-l1"><a class="reference internal" href="additional-container-services-information.html">Additional container services information</a></li>
<li class="toctree-l1"><a class="reference internal" href="container-quotas.html">Container quotas</a></li>
<li class="toctree-l1"><a class="reference internal" href="access-log-delivery.html">Access log delivery</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="additional-object-services-information.html">Additional object services information</a></li>
<li class="toctree-l1"><a class="reference internal" href="chunked-transfer-encoding.html">Chunked transfer encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating-large-objects.html">Creating large objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="enabling-file-compression.html">Enabling file compression</a></li>
<li class="toctree-l1"><a class="reference internal" href="enabling-bypass-of-browser-behavior.html">Enabling bypass of browser behavior</a></li>
<li class="toctree-l1"><a class="reference internal" href="expiring-objects.html">Expiring objects</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Object versioning</a></li>
<li class="toctree-l1"><a class="reference internal" href="account-to-account-copy.html">Account to account copy</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="additional-cdn-services-information.html">Additional CDN services information</a></li>
<li class="toctree-l1"><a class="reference internal" href="cdn-enabled-containers-served-through-ssl.html">CDN-enabled containers served through SSL</a></li>
<li class="toctree-l1"><a class="reference internal" href="streaming-cdn-enabled-containers.html">Streaming CDN-enabled containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ios-streaming.html">iOS streaming</a></li>
<li class="toctree-l1"><a class="reference internal" href="cdn-log-delivery.html">CDN log delivery</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="static-websites-using-cdn-enabled-containers.html">Static websites using CDN-enabled containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="set-error-pages-for-a-static-website.html">Set error pages for a static website</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bulk-operations.html">Bulk operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="bulk-delete.html">Bulk delete</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="public-access-to-your-cloud-files-account.html">Public access to your Cloud Files account</a></li>
<li class="toctree-l1"><a class="reference internal" href="tempurl.html">TempURL</a></li>
<li class="toctree-l1"><a class="reference internal" href="formpost.html">FormPost</a></li>
<li class="toctree-l1"><a class="reference internal" href="cors.html">CORS</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>


      <div class="callout">
  <span class="sidebarheader">Need Help?</span>

  <p>
    E-mail <a href="mailto:sdk-support@rackspace.com">sdk-support@rackspace.com</a>,<br>
    tweet <a href="https://twitter.com/rackspace">@rackspace</a>,
    chat with us in #rackspace on Freenode,
    or post in <a href="https://community.rackspace.com/developers/default">our developer forum</a>.
  </p>
</div>

<div class="callout">
  <span class="sidebarheader">Found a bug? Caught a typo?</span>
  <p>File a <a href="https://github.com/rackerlabs/developer.rackspace.com/issues/new">bug report</a> or submit a <a target="blank" href="https://github.com/rackerlabs/developer.rackspace.com">pull request</a> on our developer site Github repo.</p>
</div>

<div class="callout">
  <span class="sidebarheader">Want To Stay Up To Date?</span>
  <p>Subscribe to our developer blog <a href="/atom.xml">RSS</a> feed.</p>
</div>
    </div>
  </div>
</div>
<div class="basement">
    <div class="container">
        <img src="https://c2a32ff18d23c8f567f0-e44b0df73868b5d567b1e58e01681d15.ssl.cf5.rackcdn.com/rackerpowered-logo-79838459d447e1e48dd93c76549bdf74.png" alt="Racker Powered">
        <ul>
            <li>Â©2015 Rackspace, US Inc.</li>
            <li><a href="http://www.rackspace.com/about/">About Rackspace</a></li>
            <li><a href="http://ir.rackspace.com/">Investors</a></li>
            <li><a href="http://www.rackertalent.com">Careers</a></li>
            <li><a href="http://www.rackspace.com/information/legal/privacystatement">Privacy Statement</a></li>
            <li><a href="http://www.rackspace.com/information/legal/websiteterms">Website Terms</a></li>
            <li><a href="http://www.rackspace.com/information/legal/copyrights_trademarks">Trademarks</a></li>
        </ul>
    </div>
</div>
<script src="https://c2a32ff18d23c8f567f0-e44b0df73868b5d567b1e58e01681d15.ssl.cf5.rackcdn.com/app-b899e84f641d7962050ed3d62a3d53a7.js"></script>

  <!-- analytics -->
<script type="text/javascript">
   var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-35639070-1']);
    _gaq.push(['_setDomainName', 'rackspace.com']);
    _gaq.push(['_trackPageview']);

   (function () {
       var ga = document.createElement('script');
       ga.type = 'text/javascript';
       ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
   })();
 </script>

 <!-- Tealium -->
 <script type="text/javascript" src="https://tags.tiqcdn.com/utag/rackspace/developer/prod/utag.js"></script>

 <!-- Google Code for Rackspace Blog Page Visitors (Global Tag) -->
<!-- Remarketing tags may not be associated with personally identifiable information or placed on pages related to sensitive categories. For instructions on adding this tag and more information on the above requirements, read the setup guide: google.com/ads/remarketingsetup -->
<script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1040066332;
    var google_conversion_label = "wFI2CI7LnQQQnM747wM";
    var google_custom_params = window.google_tag_params;
    var google_remarketing_only = true;
    /* ]]> */
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
    <div style="display:inline;">
        <img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1040066332/?value=0&amp;label=wFI2CI7LnQQQnM747wM&amp;guid=ON&amp;script=0"/>
    </div>
</noscript>
</body>
</html>